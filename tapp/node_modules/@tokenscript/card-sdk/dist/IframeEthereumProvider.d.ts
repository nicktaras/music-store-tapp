import { Eip1193Provider } from "ethers";
export interface MinimalEventSourceInterface {
    addEventListener(eventType: 'message', handler: (message: MessageEvent) => void): void;
}
export interface MinimalEventTargetInterface {
    postMessage(message: any, targetOrigin?: string): void;
}
/**
 * Options for constructing the iframe ethereum provider.
 */
interface IFrameEthereumProviderOptions {
    targetOrigin?: string;
    timeoutMilliseconds?: number;
    eventSource?: MinimalEventSourceInterface;
    eventTarget?: MinimalEventTargetInterface;
}
export type IFrameEthereumProviderEventTypes = 'connect' | 'close' | 'notification' | 'chainChanged' | 'networkChanged' | 'accountsChanged';
/**
 * Export the type information about the different events that are emitted.
 */
export interface IFrameEthereumProvider {
    on(event: 'connect', handler: () => void): this;
    on(event: 'close', handler: (code: number, reason: string) => void): this;
    on(event: 'notification', handler: (result: any) => void): this;
    on(event: 'chainChanged', handler: (chainId: string) => void): this;
    on(event: 'networkChanged', handler: (networkId: string) => void): this;
    on(event: 'accountsChanged', handler: (accounts: string[]) => void): this;
}
/**
 * This is the primary artifact of this library.
 */
export declare class IFrameEthereumProvider implements Eip1193Provider {
    _isSigner: boolean;
    /**
     * Differentiate this provider from other providers by providing an isIFrame property that always returns true.
     */
    get isIFrame(): true;
    /**
     * Always return this for currentProvider.
     */
    get currentProvider(): IFrameEthereumProvider;
    private readonly targetOrigin;
    private readonly timeoutMilliseconds;
    private readonly eventSource;
    private readonly eventTarget;
    private readonly completers;
    constructor({ targetOrigin, timeoutMilliseconds, eventSource, eventTarget, }?: IFrameEthereumProviderOptions);
    /**
     * Helper method that handles transport and request wrapping
     * @param method method to execute
     * @param params params to pass the method
     */
    private execute;
    /**
     * Send the JSON RPC and return the result.
     * @param request
     * @param callback
     */
    send(request: {
        method: string;
        params?: Array<any>;
    }, callback: (error: any, response: any) => void): void;
    /**
     * Backwards compatibility method for web3.
     * @param request payload to send to the provider
     * @param callback callback to be called when the provider resolves
     */
    sendAsync(request: {
        method: string;
        params?: Array<any>;
    }, callback: (error: any, response: any) => void): Promise<void>;
    /**
     * Handle a message on the event source.
     * @param event message event that will be processed by the provider
     */
    private handleEventSourceMessage;
    request(request: {
        method: string;
        params?: Array<any> | Record<string, any>;
    }): Promise<any>;
}
export {};
//# sourceMappingURL=IframeEthereumProvider.d.ts.map